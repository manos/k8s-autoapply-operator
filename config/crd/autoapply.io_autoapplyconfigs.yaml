---
apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  name: autoapplyconfigs.autoapply.io
spec:
  group: autoapply.io
  names:
    kind: AutoApplyConfig
    listKind: AutoApplyConfigList
    plural: autoapplyconfigs
    singular: autoapplyconfig
  scope: Cluster
  versions:
    - name: v1alpha1
      served: true
      storage: true
      schema:
        openAPIV3Schema:
          description: AutoApplyConfig configures which pods to exclude from auto-restart
          type: object
          properties:
            apiVersion:
              type: string
            kind:
              type: string
            metadata:
              type: object
            spec:
              type: object
              properties:
                excludePods:
                  description: Regex patterns for pod names to exclude from auto-restart
                  type: array
                  items:
                    type: string
                excludeNamespaces:
                  description: Namespaces to exclude from watching
                  type: array
                  items:
                    type: string
                yoloMode:
                  description: Disable safe rolling restarts - all pods restart at once
                  type: boolean
            status:
              type: object
              properties:
                lastUpdated:
                  type: string
                  format: date-time
      subresources:
        status: {}

